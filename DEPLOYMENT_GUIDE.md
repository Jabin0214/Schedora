# ğŸš€ éƒ¨ç½²æŒ‡å—

## âš ï¸ é‡è¦æç¤º

æœ¬æ¬¡æ›´æ–°åŒ…å«æ•°æ®åº“æ¶æ„å˜æ›´ï¼ˆæ·»åŠ ç´¢å¼•å’Œå¤–é”®å…³ç³»ï¼‰ï¼Œéœ€è¦è°¨æ…éƒ¨ç½²ã€‚

---

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. å¤‡ä»½æ•°æ®ï¼ˆå¼ºçƒˆå»ºè®®ï¼‰

```bash
# å¤‡ä»½ç°æœ‰æ•°æ®åº“
cp Backend/inspection.db Backend/inspection.db.backup_$(date +%Y%m%d_%H%M%S)
```

### 2. æ£€æŸ¥ä¾èµ–ç‰ˆæœ¬

**åç«¯**:
- .NET 9.0
- EF Core 9.0.0
- SQLite

**å‰ç«¯**:
- Node.js 18+ 
- React 19.2.0
- Ant Design 6.1.4

---

## ğŸ”§ åç«¯éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1: åœæ­¢åç«¯æœåŠ¡

```bash
# å¦‚æœåç«¯æ­£åœ¨è¿è¡Œï¼Œå…ˆåœæ­¢
# æ ¹æ®ä½ çš„å¯åŠ¨æ–¹å¼ï¼Œå¯èƒ½éœ€è¦ Ctrl+C æˆ– kill è¿›ç¨‹
```

### æ­¥éª¤ 2: æ•°æ®åº“è¿ç§»ï¼ˆé‡è¦ï¼‰

ç”±äºæˆ‘ä»¬æ·»åŠ äº†ç´¢å¼•å’Œå¤–é”®å…³ç³»ï¼Œéœ€è¦é‡å»ºæ•°æ®åº“ï¼š

**é€‰é¡¹ A: å¦‚æœæ˜¯å¼€å‘ç¯å¢ƒï¼ˆå¯ä»¥ä¸¢å¤±æ•°æ®ï¼‰**

```bash
cd Backend
rm inspection.db  # åˆ é™¤æ—§æ•°æ®åº“
dotnet run       # å¯åŠ¨ä¼šè‡ªåŠ¨åˆ›å»ºæ–°æ•°æ®åº“
```

**é€‰é¡¹ B: å¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒï¼ˆéœ€è¦ä¿ç•™æ•°æ®ï¼‰**

```bash
cd Backend

# 1. å¯¼å‡ºç°æœ‰æ•°æ®
sqlite3 inspection.db .dump > backup.sql

# 2. åˆ é™¤æ—§æ•°æ®åº“
rm inspection.db

# 3. å¯åŠ¨åº”ç”¨ï¼ˆä¼šåˆ›å»ºæ–°æ¶æ„ï¼‰
dotnet run &
sleep 5  # ç­‰å¾…æ•°æ®åº“åˆ›å»º

# 4. åœæ­¢åº”ç”¨
pkill -f "dotnet.*InspectionApi"

# 5. å¯¼å…¥æ•°æ®ï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºç´¢å¼•ï¼‰
sqlite3 inspection.db < backup.sql

# 6. é‡æ–°å¯åŠ¨
dotnet run
```

### æ­¥éª¤ 3: éªŒè¯åç«¯

```bash
# æµ‹è¯• API æ˜¯å¦æ­£å¸¸
curl http://localhost:5097/api/properties
curl http://localhost:5097/api/inspectiontasks
```

---

## ğŸ¨ å‰ç«¯éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1: å®‰è£…ä¾èµ–ï¼ˆå¦‚æœæœ‰æ–°ä¾èµ–ï¼‰

```bash
cd Frontend
npm install
```

### æ­¥éª¤ 2: æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

### æ­¥éª¤ 3: å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

```bash
npm run dev
```

### æ­¥éª¤ 4: éƒ¨ç½²åˆ°ç”Ÿäº§ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

```bash
# æ–¹æ³•1: ä½¿ç”¨é™æ€æœåŠ¡å™¨
npx serve -s dist -p 5173

# æ–¹æ³•2: ä½¿ç”¨ nginx
cp -r dist/* /var/www/html/schedora/
```

---

## âœ… éªŒè¯æ¸…å•

éƒ¨ç½²å®Œæˆåï¼Œè¯·é€ä¸€éªŒè¯ä»¥ä¸‹åŠŸèƒ½ï¼š

### åç«¯éªŒè¯

- [ ] API æœåŠ¡æ­£å¸¸å¯åŠ¨
- [ ] æ•°æ®åº“æ–‡ä»¶å­˜åœ¨ä¸”å¯è®¿é—®
- [ ] æ‰€æœ‰ API ç«¯ç‚¹å“åº”æ­£å¸¸
- [ ] æ—¥å¿—ä¸­æ— é”™è¯¯ä¿¡æ¯
- [ ] æ—§æ•°æ®æ­£ç¡®è¿ç§»ï¼ˆå¦‚æœé€‚ç”¨ï¼‰

### å‰ç«¯éªŒè¯

- [ ] åº”ç”¨æ­£å¸¸åŠ è½½
- [ ] ç‰©ä¸šæ¡£æ¡ˆé¡µé¢æ­£å¸¸æ˜¾ç¤º
- [ ] ä»»åŠ¡è®¡åˆ’é¡µé¢æ­£å¸¸æ˜¾ç¤º
- [ ] å†å²è®°å½•é¡µé¢æ­£å¸¸æ˜¾ç¤º
- [ ] **æ–°åŠŸèƒ½**: æ‚æ´»å¯ä»¥è¾“å…¥å’Œæ˜¾ç¤ºè´¹ç”¨
- [ ] **æ–°åŠŸèƒ½**: èœå•é€‰ä¸­çŠ¶æ€æ­£ç¡®
- [ ] æ·»åŠ /ç¼–è¾‘/åˆ é™¤æ“ä½œæ­£å¸¸
- [ ] é”™è¯¯æç¤ºæ­£å¸¸æ˜¾ç¤º

### æ–°åŠŸèƒ½æµ‹è¯•

1. **æ‚æ´»è´¹ç”¨åŠŸèƒ½**
   - [ ] æ·»åŠ æ‚æ´»æ—¶å¯ä»¥è¾“å…¥è´¹ç”¨
   - [ ] è´¹ç”¨ä»¥ `$XX.XX` æ ¼å¼æ˜¾ç¤º
   - [ ] ç¼–è¾‘æ‚æ´»æ—¶å¯ä»¥ä¿®æ”¹è´¹ç”¨
   - [ ] å†å²è®°å½•ä¸­æ˜¾ç¤ºæ‚æ´»è´¹ç”¨

2. **èœå•å¯¼èˆª**
   - [ ] ç‚¹å‡»èœå•é¡¹åï¼Œå¯¹åº”èœå•é«˜äº®
   - [ ] åˆ·æ–°é¡µé¢åï¼Œèœå•çŠ¶æ€ä¿æŒ

3. **æ•°æ®å®‰å…¨**
   - [ ] å°è¯•åˆ é™¤æœ‰å…³è”æ•°æ®çš„ç‰©ä¸šæ—¶ï¼Œæ˜¾ç¤ºé”™è¯¯æç¤º
   - [ ] ç¡®è®¤é”™è¯¯æ¶ˆæ¯æ¸…æ™°æ˜“æ‡‚

---

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜1: æ•°æ®åº“åˆ›å»ºå¤±è´¥

**é”™è¯¯**: `Microsoft.Data.Sqlite.SqliteException: SQLite Error 1: 'table "Properties" already exists'`

**è§£å†³**: åˆ é™¤æ—§æ•°æ®åº“æ–‡ä»¶åé‡è¯•
```bash
cd Backend
rm inspection.db
dotnet run
```

### é—®é¢˜2: å¤–é”®çº¦æŸé”™è¯¯

**é”™è¯¯**: `FOREIGN KEY constraint failed`

**åŸå› **: æ—§æ•°æ®ä¸­å­˜åœ¨å­¤ç«‹è®°å½•ï¼ˆå¼•ç”¨ä¸å­˜åœ¨çš„ç‰©ä¸šï¼‰

**è§£å†³**: æ¸…ç†å­¤ç«‹æ•°æ®
```sql
-- ä½¿ç”¨ SQLite å‘½ä»¤è¡Œ
sqlite3 inspection.db

-- æŸ¥æ‰¾å­¤ç«‹è®°å½•
SELECT * FROM InspectionTasks WHERE PropertyId NOT IN (SELECT Id FROM Properties);
SELECT * FROM InspectionRecords WHERE PropertyId NOT IN (SELECT Id FROM Properties);

-- åˆ é™¤å­¤ç«‹è®°å½•ï¼ˆè°¨æ…æ“ä½œï¼‰
DELETE FROM InspectionTasks WHERE PropertyId NOT IN (SELECT Id FROM Properties);
DELETE FROM InspectionRecords WHERE PropertyId NOT IN (SELECT Id FROM Properties);
```

### é—®é¢˜3: å‰ç«¯æ— æ³•è¿æ¥åç«¯

**é”™è¯¯**: `ERR_NETWORK` æˆ– `æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨`

**æ£€æŸ¥**:
1. åç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Ÿ
2. ç«¯å£ 5097 æ˜¯å¦è¢«å ç”¨ï¼Ÿ
3. CORS é…ç½®æ˜¯å¦æ­£ç¡®ï¼Ÿ
4. å‰ç«¯ API åœ°å€æ˜¯å¦æ­£ç¡®ï¼Ÿ

```bash
# æ£€æŸ¥åç«¯ç«¯å£
netstat -an | grep 5097

# æ£€æŸ¥ CORS æ—¥å¿—
# æŸ¥çœ‹åç«¯æ§åˆ¶å°è¾“å‡º
```

### é—®é¢˜4: æ‚æ´»è´¹ç”¨ä¸æ˜¾ç¤º

**æ£€æŸ¥**:
1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
2. æ£€æŸ¥ Console æ˜¯å¦æœ‰é”™è¯¯
3. ç¡®è®¤åç«¯æ•°æ®åº“ä¸­æœ‰ `Cost` å­—æ®µ

```bash
# æ£€æŸ¥æ•°æ®åº“æ¶æ„
sqlite3 Backend/inspection.db ".schema SundryTasks"
```

---

## ğŸ”„ å›æ»šè®¡åˆ’

å¦‚æœéƒ¨ç½²å‡ºç°é—®é¢˜ï¼Œå¯ä»¥å¿«é€Ÿå›æ»šï¼š

### åç«¯å›æ»š

```bash
cd Backend

# 1. åœæ­¢æ–°ç‰ˆæœ¬
pkill -f "dotnet.*InspectionApi"

# 2. æ¢å¤å¤‡ä»½çš„æ•°æ®åº“
cp inspection.db.backup_YYYYMMDD_HHMMSS inspection.db

# 3. å›é€€ä»£ç ï¼ˆå¦‚æœä½¿ç”¨ gitï¼‰
git checkout HEAD~1

# 4. é‡æ–°å¯åŠ¨
dotnet run
```

### å‰ç«¯å›æ»š

```bash
cd Frontend

# 1. å›é€€ä»£ç 
git checkout HEAD~1

# 2. é‡æ–°æ„å»º
npm run build

# 3. é‡æ–°éƒ¨ç½²
```

---

## ğŸ“Š æ€§èƒ½ç›‘æ§

éƒ¨ç½²åå»ºè®®ç›‘æ§ä»¥ä¸‹æŒ‡æ ‡ï¼š

1. **å“åº”æ—¶é—´**: API å“åº”æ—¶é—´åº”è¯¥æ›´å¿«ï¼ˆå› ä¸ºæ·»åŠ äº†ç´¢å¼•ï¼‰
2. **æ•°æ®åº“å¤§å°**: æ•°æ®åº“å¯èƒ½ç•¥å¾®å¢å¤§ï¼ˆç´¢å¼•å ç”¨ç©ºé—´ï¼‰
3. **å†…å­˜ä½¿ç”¨**: åº”è¯¥ä¿æŒç¨³å®š
4. **é”™è¯¯ç‡**: åº”è¯¥ä¸º 0 æˆ–æ¥è¿‘ 0

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. `IMPROVEMENTS.md` - äº†è§£æ‰€æœ‰ä¿®æ”¹å†…å®¹
2. åç«¯æ—¥å¿—æ–‡ä»¶
3. æµè§ˆå™¨ Console é”™è¯¯ä¿¡æ¯

---

## âœ¨ éƒ¨ç½²å®Œæˆå

1. é€šçŸ¥å›¢é˜Ÿéƒ¨ç½²å®Œæˆ
2. æ›´æ–°æ–‡æ¡£ï¼ˆå¦‚æœéœ€è¦ï¼‰
3. åŸ¹è®­ç”¨æˆ·ä½¿ç”¨æ–°åŠŸèƒ½ï¼ˆæ‚æ´»è´¹ç”¨ï¼‰
4. ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶å†µï¼ˆè‡³å°‘24å°æ—¶ï¼‰

ç¥éƒ¨ç½²é¡ºåˆ©ï¼ğŸ‰
